name: UChicago
on:
  workflow_dispatch:
  push:

jobs:
  Explore-GitHub-Actions:
    runs-on: arc-runner-set-uchicago
    steps:
      - run: echo "ðŸŽ‰ This job uses runner scale set runners!"

      - uses: actions/checkout@v5

      - name: Setup Globus credentials securely
        run: |
          mkdir -p ~/.globus
          # Write certificate
          printf "%s" "${{ secrets.GLOBUS_USERCERT }}" > ~/.globus/usercert.pem
          # Write key
          printf "%s" "${{ secrets.GLOBUS_USERKEY }}" > ~/.globus/userkey.pem
          # Set permissions
          chmod 644 ~/.globus/usercert.pem
          chmod 600 ~/.globus/userkey.pem
          ls -lavh ~/.globus/
          printenv
        # Ensure secrets are masked in logs
        shell: bash

      - name: Rucio
        run: Rucio/rucio_script.sh uchicago
        shell: bash
